#!/bin/bash

# Check if odb-keys.txt is being staged for commit
if git diff --cached --name-only | grep -q "^odb-keys\.txt$"; then
    echo "   ERROR: odb-keys.txt cannot be committed!"
    echo "   This file contains private SOPS keys and must never be in git."
    echo ""
    echo "   To unstage: git reset HEAD odb-keys.txt"
    echo ""
    exit 1
fi

exit 0
